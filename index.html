<!DOCTYPE html>
<html>
<head></head>
<body>

<h1 style='text-align: center; margin-bottom: -35px;'>On the way to self-respect webapp</h1>
  <br><br>

	
<!-- https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div -->
<!-- https://CodeSolutions2.github.io/on_the_way_to_selfrespect/index.html -->

<button id="run_it_button" onclick="run_it()" style="display:block">run_it</button>

	


	
<style>
      canvas {border: 1px solid black;}
    </style>
	
  
  <script>

  // -------------------------------------------------
const ImageArray = ["https://storage.googleapis.com/on-the-way2selfrespect/red.png",
		    "https://storage.googleapis.com/on-the-way2selfrespect/green.png",
		    "https://storage.googleapis.com/on-the-way2selfrespect/blue.png", 
		     "https://storage.googleapis.com/on-the-way2selfrespect/cyan.png",
		    "https://storage.googleapis.com/on-the-way2selfrespect/yellow.png", 
		    "https://storage.googleapis.com/on-the-way2selfrespect/magenta.png",
		    "https://storage.googleapis.com/on-the-way2selfrespect/orange.png"];


var squarelocation = [0, 1, 2, 3, 4, 5, 6];

	  
// -------------------------------------------------
    
function run_it() {
  
ImageArray.forEach(function(url, index) {
        
	    // ---------------------------
	    // Create a canvas for first image
	    var ctx = create_dynamic_canvasElement(index);
	    // ---------------------------
        
	    const image = new Image();

	    // Add 'crossorigin' attribute to bypass insecure error
	    image.crossOrigin = ""
	    // image.crossOrigin = "anonymous";
	    // image.crossOrigin = "use-credentials"; // https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin

	    // PRINT
	    // outp.innerHTML += 'image.complete: ' + image.complete + "<br/>";

	    image.setAttribute('crossOrigin', "");
	    image.setAttribute('headers', {"Content-Type": "application/json", "Access-Control-Allow-Origin": "*"});

	    image.onload = async () => {
	
		    // Draw image on canvas
		    // canvasElement.style.display = "block";
		    ctx.drawImage(image, 0,0);

		    // Write image name on canvas
		    ctx.font = "bold 14px serif";
		    let out = url.split("/")
		    let image_name = out[out.length-1];
		    ctx.fillStyle = "#ffffff";  // Font color = white, 
		    ctx.fillText(image_name, 10, 15);
        
	    };  // end of image.onload

	    image.src = url;

  	});  // end of image.forEach
  
}  // end of main
	  
// -------------------------------------------------

// Tutorial script: idea is to create 
//function create_CanvasElements_per_square() {
  //  squarelocation.forEach((val, index) => {

      // Create a canvas element
  //    var img = document.createElement('img');
      
   //   const img = document.createElement('img');
//     img.classList.add('main')
 //     img.setAttribute('src', canvas.toDataURL())
     // img.setAttribute('data-id', val);
      
      // img.addEventListener('click', show_img)
      
  //   main_display.appendChild(img);
//   })
//}

// -------------------------------------------------
    
function create_dynamic_canvasElement(index) {
	
	// Create a canvas element
	var canvasElement = document.createElement('canvas');

	// Set the width and height of the canvas
	canvasElement.width = 150;
	canvasElement.height = canvasElement.width;
	      
	// Get the 2D rendering context of the canvas
	var ctx = canvasElement.getContext("2d");
	
	if (index == 0) {
		canvasElement.style.left = 40+'px';
	} else {
		let tot = index*canvasElement.width + 40;
		canvasElement.style.left = tot+'px';
	}


	// Make a square on half of the canvas
	ctx.fillStyle = '#999c98';  // Background square over image = blue
	ctx.fillRect(0, 0, canvasElement.width, 50);  // fillRect(x, y, width, height);
	// ctx.fillRect(0, 0, canvasElement.width, canvasElement.height);
  
	// Add the canvas to the document body or any other desired element
	document.body.appendChild(canvasElement);

	return ctx;
}

// -------------------------------------------------



// -------------------------------------------------

	
</script>
</body>
</html>
