<!DOCTYPE html>
<html>
<head></head>
<body>

<h1 style='text-align: center; margin-bottom: -35px;'>On the way to self-respect webapp</h1>
  <br><br>

	
<!-- https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div -->
<!-- https://CodeSolutions2.github.io/on_the_way_to_selfrespect/index.html -->

<button id="run_it_button" onclick="run_it()" style="display:block">run_it</button>
<button id="cover_images_button" onclick="cover_images()" style="display:block">cover_images</button>
<button id="uncover_images_button" onclick="uncover_images()" style="display:block">uncover_images</button>

	


	
<style>
      canvas {border: 1px solid black;}
    </style>
	
  
  <script>

  // -------------------------------------------------
const ImageArray = ["https://storage.googleapis.com/on-the-way2selfrespect/red.png",
		    "https://storage.googleapis.com/on-the-way2selfrespect/green.png",
		    "https://storage.googleapis.com/on-the-way2selfrespect/blue.png", 
		     "https://storage.googleapis.com/on-the-way2selfrespect/cyan.png",
		    "https://storage.googleapis.com/on-the-way2selfrespect/yellow.png", 
		    "https://storage.googleapis.com/on-the-way2selfrespect/magenta.png",
		    "https://storage.googleapis.com/on-the-way2selfrespect/orange.png"];


var squarelocation = [0, 1, 2, 3, 4, 5, 6];

// Set the width and height of the canvas
var canvasElement_width = 150;
var canvasElement_height = canvasElement_width;
	  
// -------------------------------------------------
    
function run_it() {
  
ImageArray.forEach(function(url, index) {
        
	    // ---------------------------
	    // Create a canvas for first image
	    var ctx = create_dynamic_canvasElement(index);
	    // ---------------------------
        
	    const image = new Image();

	    // Add 'crossorigin' attribute to bypass insecure error
	    image.crossOrigin = ""
	    // image.crossOrigin = "anonymous";
	    // image.crossOrigin = "use-credentials"; // https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin

	    // PRINT
	    // outp.innerHTML += 'image.complete: ' + image.complete + "<br/>";

	    image.setAttribute('crossOrigin', "");
	    image.setAttribute('headers', {"Content-Type": "application/json", "Access-Control-Allow-Origin": "*"});

	    image.onload = async () => {
	
		    // Draw image on canvas
		    // canvasElement.style.display = "block";
		    ctx.drawImage(image, 0,0);

		    cover_images();

		    if (index == 4 || index == 2){
			    uncover_images();

			    await new Promise(r => setTimeout(r, 2000));
			    
		    }

		    // Write image name on canvas
		    //ctx.font = "bold 14px serif";
		    //let out = url.split("/")
		    //let image_name = out[out.length-1];
		    //ctx.fillStyle = "#ffffff";  // Font color = white, 
		    //ctx.fillText(image_name, 10, 15);
        
	    };  // end of image.onload

	    image.src = url;

  	});  // end of image.forEach
  
}  // end of main
	  
// -------------------------------------------------

function cover_images(){
	// Cover all images with a grey square
	ctx.fillStyle = '#999c98';  // Background square over image = blue
	// ctx.fillRect(0, 0, canvasElement.width, 50);  // fillRect(x, y, width, height);
	ctx.fillRect(0, 0, canvasElement_width, canvasElement_height);
}

	  	  
// -------------------------------------------------

function uncover_images(){
	// Cover all images with a grey square
	ctx.fillStyle = '#999c98';  // Background square over image = blue
	ctx.fillRect(0, 0, 0, 0);
}
	  
// -------------------------------------------------
    
function create_dynamic_canvasElement(index) {
	
	// Create a canvas element
	var canvasElement = document.createElement('canvas');

	canvasElement.width = canvasElement_width;
	canvasElement.height = canvasElement_height;
	
	// Get the 2D rendering context of the canvas
	var ctx = canvasElement.getContext("2d");
	
	if (index == 0) {
		canvasElement.style.left = 40+'px';
	} else {
		let tot = index*canvasElement.width + 40;
		canvasElement.style.left = tot+'px';
	}
  
	// Add the canvas to the document body or any other desired element
	document.body.appendChild(canvasElement);

	return ctx;
}

// -------------------------------------------------



// -------------------------------------------------

	
</script>
</body>
</html>
