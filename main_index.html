<!DOCTYPE html>
<html>
<head></head>
<body>

<h1 style='text-align: center; margin-bottom: -35px;'>On the way to self-respect webapp</h1>


<!-- Section to submit self-respect wisdom message -->
<label for="input_text_label" style="display:block">Enter text to label, each sentence separated by the \n character will be labeled:</label>
<input type="text" value="" placeholder="Share your self-respect wisdom message with other game users:" id="self_respect_wisdom_message" rows="10" cols="500" style="display:block">
<br>
<button id="submit_button" onclick="post_text_form()" style="display:block">Submit your wisdom message to the game</button>
<!-- -------------------------- -->
	
<!-- Self-respect Map -->

<!-- View results -->
<div id="output" style="font-family:courier;font-size:24px;height:300px"></div>

	

<style>
background-color: rgba(130, 209, 165, .5),
canvas {border: 1px solid black; position: absolute; display: inline-block; z-index: 1; top: 200px;},
div {position: relative; z-index: 2;},
</style>




	
  
<script>

// Set the width and height of the canvas
var canvasElement_width = 150;
var canvasElement_height = canvasElement_width;

	
// -------------------------------------------------
	
// Start off with static canvases in an S-shape - then make the canvases appear dynamically when one scrolls down the page
var canvasElement0 = document.createElement('canvas');
var ctx0 = canvasElement0.getContext("2d");  // Get the 2D rendering context of the canvas

var canvasElement1 = document.createElement('canvas');
var ctx1 = canvasElement1.getContext("2d");

var canvasElement2 = document.createElement('canvas');
var ctx2 = canvasElement2.getContext("2d");  // Get the 2D rendering context of the canvas

var canvasElement3 = document.createElement('canvas');
var ctx3 = canvasElement3.getContext("2d");  // Get the 2D rendering context of the canvas
	
// -------------------------------------------------

canvasElement0.width = canvasElement_width;
canvasElement0.height = canvasElement_height;
canvasElement1.width = canvasElement_width;
canvasElement1.height = canvasElement_height;
canvasElement2.width = canvasElement_width;
canvasElement2.height = canvasElement_height;
canvasElement3.width = canvasElement_width;
canvasElement3.height = canvasElement_height;

// -------------------------------------------------
// 1st row
const marg = 50;
canvasElement0.style.left = Number(1*canvasElement_width + marg)+'px';
canvasElement0.style.top = Number(0*canvasElement_width)+'px';
// -----------------------------------
// 2nd row
canvasElement1.style.left = Number(0*canvasElement_width + marg)+'px';
canvasElement1.style.top = Number(1*canvasElement_width)+'px';
// -----------------------------------
// 3rd row
canvasElement2.style.left = Number(1*canvasElement_width + marg)+'px';
canvasElement2.style.top = Number(2*canvasElement_width)+'px';
// -----------------------------------
// 4th row
canvasElement3.style.left = Number(2*canvasElement_width + marg)+'px';
canvasElement3.style.top = Number(3*canvasElement_width)+'px';



async function processEvent(event) {
	
    // When the user clicks the square, go to index6.html and run 
	window.href = 'https://codesolutions2.github.io/on_the_way_to_selfrespect/index6.html';
	//run_it


	this.removeEventListener("click", processEvent);
}



canvasElement0.addEventListener("click", processEvent, false);
	

async function post_text_form() {
	
  // Create <form> element to submit parameters to endpoint
  var form = document.createElement('form');
	
  form.setAttribute('method', 'POST'); 

  // Step 0: The browser navigates to the URL given in the action attribute : the user is taken away from the current page and redirected to a new page.
  // The action attribute is used to indicate where the formâ€™s data is sent to when it is submitted.
  var url = 'https://script.google.com/macros/s/AKfycbyziIGTNJs52RfhwM5jMOlhHIKrznlyxhxUDLK9c_mcovTiuo9LTY65epaA3EFZNINT7A/exec';
  form.setAttribute('action', url);


  // The form submission result will open in a new tab or window, depending on the user's browser settings.
  // form.setAttribute('target', "_blank");
	
  form.setAttribute('headers', {"Content-Type": "application/json", "Access-Control-Allow-Origin": "*"});

  const wisdom_message = document.getElementById("self_respect_wisdom_message").value;
  
  // Just use arrays: each column is a form variable
  let type_parameters = ['text', 'submit'];
  var name_parameters = ['key', 'confirm_submit'] 
  var value_parameters = [wisdom_message, 'Submit'];
	
  type_parameters.forEach(async function(type_val, index) {
	  let type = type_val;
	  let name = name_parameters[index];
	  let value = value_parameters[index];
	  
    var input = document.createElement('input');
    input.innerHTML = '<input style="display:none;" type=' +type+ ' name=' +name+ 'value=' +value+ '>';
          
     form.appendChild(input);
    });

  // Add form to page and submit it to open the endpoint.
  document.body.appendChild(form);
	
  form.submit();
  
}  // end of post_text_form



	

	
</script>
</body>
</html>
